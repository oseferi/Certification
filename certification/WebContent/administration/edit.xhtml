<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

<h:head></h:head>
<h:body>
<f:metadata>
    <f:viewParam name="id" value="#{editBean.id}" />
    <f:viewParam name="object" value="#{editBean.object}" />
    <f:event type="preRenderView" listener="#{editBean.init}" />
    
</f:metadata>
	<h:form id="employeeForm" rendered="#{not empty editBean.selectedEmployee}"> 
		<p:growl id="growl1" showDetail="true" severity="info" sticky="true" />  
   
			<p:outputPanel id="employeeDetail" style="text-align:center;">
	                <h:outputText value="Name:"
	                rendered="#{not editBean.selectedEmployeeCredentialsEditable}"/>
	                <h:outputText value="#{editBean.selectedEmployee.name}" 
	                	rendered="#{(not editBean.selectedEmployeeEditable) and (not editBean.selectedEmployeeCredentialsEditable)}"/>
	              	<h:inputText id="Employee_Name_Editable" value="#{editBean.selectedEmployee.name}"
	              		 rendered="#{editBean.selectedEmployeeEditable}" required="true"
	              		 maxlength="200"/>
	 				<p:message for="Employee_Name_Editable"   />
	 				
	 				
	                <h:outputText value="Surname" 
	                rendered="#{not editBean.selectedEmployeeCredentialsEditable}"/>
	                <h:outputText value="#{editBean.selectedEmployee.surname}" 
	                	rendered="#{(not editBean.selectedEmployeeEditable) and (not editBean.selectedEmployeeCredentialsEditable)}"/>
	                <h:inputText id="Employee_Surname_Editable" value="#{editBean.selectedEmployee.surname}" 
	                	rendered="#{editBean.selectedEmployeeEditable}" required="true"
	                	maxlength="200"/>
	            	<p:message for="Employee_Surname_Editable"   />
	            	
	            	
	 				<h:outputText value="SSN:" 
	 				rendered="#{not editBean.selectedEmployeeCredentialsEditable}"/>
	                <h:outputText value="#{editBean.selectedEmployee.ssn}" 
	                	rendered="#{(not editBean.selectedEmployeeEditable) and (not editBean.selectedEmployeeCredentialsEditable)}" />
	                <h:inputText id="Employee_SSN_Editable" value="#{editBean.selectedEmployee.ssn}" 
	                	rendered="#{editBean.selectedEmployeeEditable}" required="true"
	                	maxlength="50"/>
	                <p:message for="Employee_SSN_Editable"   />
	                
	                
	 				<h:outputText value="Date of Birth:" 
	 				rendered="#{not editBean.selectedEmployeeCredentialsEditable}"/>
	                <h:outputText value="#{editBean.selectedEmployee.dateOfBirth}" 
	                	rendered="#{(not editBean.selectedEmployeeEditable) and (not editBean.selectedEmployeeCredentialsEditable)}"/>
	                <p:calendar id="Employee_BirthDay_Editable" value="#{editBean.selectedEmployee.dateOfBirth}"
	                	 rendered="#{editBean.selectedEmployeeEditable}" required="true"/>
	                <p:message for="Employee_BirthDay_Editable"
	                maxlength="200"/>
	                
	                
	                <h:outputText value="Address:" 
	                rendered="#{not editBean.selectedEmployeeCredentialsEditable}"/>
	                <h:outputText value="#{editBean.selectedEmployee.address}" 
	                	rendered="#{(not editBean.selectedEmployeeEditable) and (not editBean.selectedEmployeeCredentialsEditable)}"/>
	                <h:inputText id="Employee_Address_Editable" value="#{editBean.selectedEmployee.address}"
	                	 rendered="#{editBean.selectedEmployeeEditable}" required="true"/>
	                <p:message for="Employee_Address_Editable"
	                maxlength="500"/>
					
					<h:outputText value="Email:" 
	                rendered="#{not editBean.selectedEmployeeCredentialsEditable}"/>
	                <h:outputText value="#{editBean.selectedEmployee.email}" 
	                	rendered="#{(not editBean.selectedEmployeeEditable) and (not editBean.selectedEmployeeCredentialsEditable)}"/>
	              	<h:inputText id="Employee_Email_Editable" value="#{editBean.selectedEmployee.email}"
	              		 rendered="#{editBean.selectedEmployeeEditable}" required="true"
	              		 maxlength="200"/>
	 				<p:message for="Employee_Email_Editable"   />
	 				
	 				<h:outputText value="Telephone:" 
	                rendered="#{not editBean.selectedEmployeeCredentialsEditable}"/>
	                <h:outputText value="#{editBean.selectedEmployee.phoneNumber}" 
	                	rendered="#{(not editBean.selectedEmployeeEditable) and (not editBean.selectedEmployeeCredentialsEditable)}"/>
	              	<h:inputText id="Employee_Phone_Number_Editable" value="#{editBean.selectedEmployee.phoneNumber}"
	              		 rendered="#{editBean.selectedEmployeeEditable}" required="true"
	              		 maxlength="200"/>
	 				<p:message for="Employee_Phone_Number_Editable"   />
					
					<h:outputText value="Salary:" 
	                rendered="#{not editBean.selectedEmployeeCredentialsEditable}"/>
	                <h:outputText value="#{editBean.selectedEmployee.salary}" 
	                	rendered="#{(not editBean.selectedEmployeeEditable) and (not editBean.selectedEmployeeCredentialsEditable)}"/>
	              	<h:inputText id="Employee_Salary_Editable" value="#{editBean.selectedEmployee.salary}"
	              		 rendered="#{editBean.selectedEmployeeEditable}" required="true"
	              		 maxlength="200"/>
	 				<p:message for="Employee_Salary_Editable"   />
					
	                <h:outputText  value="Username:" 
	                rendered="#{editBean.selectedEmployeeCredentialsEditable}"/>
	                <h:inputText id="Employee_Username_Editable" value="#{editBean.selectedEmployee.username}" 
	                rendered="#{editBean.selectedEmployeeCredentialsEditable}"	required="true"/>
	                <p:message for="Employee_Username_Editable"
	                maxlength="200"/>
	                
	                <h:outputText value="Password:" 
	                rendered="#{editBean.selectedEmployeeCredentialsEditable}"/>
	                <p:password id="Employee_Password_Editable" value="#{editBean.newPassword}" 
	                rendered="#{editBean.selectedEmployeeCredentialsEditable}"	feedback="true" />
	                <p:message for="Employee_Password_Editable"
	                maxlength="32"/>	                
		    	                
		    	                
	                <p:splitButton value="Edit Personal Information"  update="employeeDetail" 
	                			rendered="#{(not editBean.selectedEmployeeEditable) and (not editBean.selectedEmployeeCredentialsEditable)}"
	                			 action="#{editBean.enableEditing()}" icon="ui-icon-disk">
				        <p:menuitem value="Edit Credentials"  update="employeeDetail" icon="ui-icon-arrowrefresh-1-w"
				         action="#{editBean.enableCredentialsEditing()}"/>
				        <p:menuitem value="Delete" update="growl1 " oncomplete="PF('employeeDialog').hide()"
	                			    icon="ui-icon-close" >	
				        <p:confirm header="Confirmation" message="Delete Employee?" icon="ui-icon-alert"  />
				        </p:menuitem>
				        <p:separator />
				    </p:splitButton>
	                
	                
		           	<p:commandButton id="save_button" type="submit" update="growl1 employeeDetail"
		           					  value="Save Employee" 
		           					 rendered="#{editBean.selectedEmployeeEditable or editBean.selectedEmployeeCredentialsEditable}"  
		           					 action="#{editBean.updateEmployee(editBean.selectedEmployee.id)}" >
		           	  <p:confirm header="Confirmation" message="Save Employee?" icon="ui-icon-alert" />
		           	</p:commandButton>
		           	
		           	<p:commandButton id="cancel_button" type="submit" update="employeeDetail"
		           					 value="Cancel Editing" 
		           					 rendered="#{editBean.selectedEmployeeEditable or editBean.selectedEmployeeCredentialsEditable}"  
		           					 action="#{editBean.disableEditing()}"
		           					 immediate="true" >
		           	  <p:confirm header="Confirmation" message="Cancel Editing?" icon="ui-icon-alert" />
		           	</p:commandButton>
		           	
		            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
				        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
				        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
				    </p:confirmDialog>
	        </p:outputPanel>
	</h:form>
    <h:form id="certificationsForm" rendered="#{not empty editBean.selectedCertificate}">
    	<p:growl id="growl2" showDetail="true" severity="info" sticky="true" />  
    	 <p:outputPanel id="certificationDetail" >
				<h4><h:outputLabel>Full Name:</h:outputLabel></h4>
				<i><h:outputText value="#{editBean.selectedCertificate.user.name}" />
				<h:outputText value=" #{editBean.selectedCertificate.user.surname}" /></i>
				<h4><h:outputLabel>Certificate Title:</h:outputLabel></h4>
				<i><h:outputText value="#{editBean.selectedCertificate.certificate.title}" /></i>
				<h4><h:outputLabel>Date Assigned:</h:outputLabel></h4>
				<i><h:outputText value="#{editBean.selectedCertificate.dateAssigned}" /></i>
				<h4><h:outputLabel>Status</h:outputLabel></h4>
				<p:selectOneMenu id="certificationStatus"
				value="#{editBean.selectedCertificate.status}" 
				lazy="true" style="width:125px" >
		            <f:selectItems var="status"
			            value="#{editBean.statuses}"
			            itemLabel="#{status != null ? (status == true ? 'Passed' : 'Failed' ) : 'Undone'}"
			            itemValue="#{status}"/>
		        </p:selectOneMenu>
		        <h:message for="certificationStatus" />
				<h4><h:outputLabel>Score</h:outputLabel></h4>
				<i><h:inputText pt:type="number" id="certificationScore"
				value="#{editBean.selectedCertificate.score}"/></i>
				<h:message for="certificationScore" />
	        </p:outputPanel>
	        <p:commandButton
	        action="#{editBean.updateCertification()}"
	        value="Save"
	        update="certificationsForm:growl2 certificationsForm:certificationDetail">
	        </p:commandButton>
	        <p:button value="cancel" outcome="certifications-management">
	        
	        </p:button>
    </h:form>
</h:body>
</html>
